spring:
  application:
    name: sample-cicd-springboot-gcp

  # JPA設定
  jpa:
    hibernate:
      ddl-auto: none
    show-sql: false
    properties:
      hibernate:
        format_sql: true

  # SQL初期化設定
  sql:
    init:
      mode: always

  # OAuth2 / OIDC設定
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:your-google-client-id}
            client-secret: ${GOOGLE_CLIENT_SECRET:your-google-client-secret}
            scope:
              - openid
              - profile
              - email
            redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
        provider:
          google:
            issuer-uri: https://accounts.google.com

server:
  port: ${PORT:8080}
  # X-Forwarded-*ヘッダーを考慮してHTTPSリダイレクトURIを正しく生成
  forward-headers-strategy: framework

logging:
  level:
    root: INFO
    com.sn0326.cicddemo: DEBUG
    org.springframework.security: DEBUG

  # 構造化ロギング設定
  structured:
    format:
      console: ecs  # Elastic Common Schema形式
    ecs:
      service:
        name: ${spring.application.name}
        version: 0.0.1-SNAPSHOT
        environment: ${SPRING_PROFILES_ACTIVE:default}